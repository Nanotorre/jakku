{"ast":null,"code":"import _defineProperty from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import Productmapcontainer from\"../molecules/Productmapcontainer\";import PreloaderSpinner from\"../atoms/PreloaderSpinner\";import{withRouter}from'react-router-dom';import PPal from\"../organisms/PPal\";import moment from\"moment\";import'moment/locale/es';moment.locale('es');var s=process.env.PAYPAL_CLIENT_ID;var CLIENT={sandbox:\"AQcrq4YDWyfXU3sXAPunwF77twdTo_JaPFx2en6b48mJfwpzw1vRXcuJVcOD4P7CUcxstryIVCRj2_bB\"// sandbox: `${process.env.REACT_APP_PAYPAL_CLIENT_ID}`\n};var ENV='sandbox';var ShowProduct=/*#__PURE__*/function(_Component){_inherits(ShowProduct,_Component);function ShowProduct(props){var _this;_classCallCheck(this,ShowProduct);_this=_possibleConstructorReturn(this,_getPrototypeOf(ShowProduct).call(this,props));_this.goBack=function(){_this.props.history.goBack();};_this.transformDate=function(){moment.locale('es');var dateTransformed=moment(_this.props.product.bid.deadLine).format('LL');return dateTransformed;};_this.state={product:_this.props.product};return _this;}_createClass(ShowProduct,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.productFromApp().then(function(product){_this2.setState(_objectSpread({},_this2.state,{product:_this2.props.product}));console.log(\"showproductmount\",_this2.props.product);});}},{key:\"change\",value:function change(){this.props.productFromApp();this.setState(_objectSpread({},this.state,{product:this.props.product}));console.log(\"%%%%\",this.state);}},{key:\"buy\",value:function buy(){this.props.buyFromApp(this.props.product._id);}},{key:\"render\",value:function render(){var _this3=this;console.log(process.env);var onSuccess=function onSuccess(payment){_this3.props.buyFromApp(_this3.props.product._id).then(function(){return console.log('Successful payment!',payment);});};var onError=function onError(error){return console.log('Erroneous payment OR failed to load script!',error);};var onCancel=function onCancel(data){return console.log('Cancelled payment!',data);};console.log(CLIENT);if(this.props.product){var _React$createElement;return React.createElement(\"div\",{className:\"display-product\"},React.createElement(\"a\",{className:\"back-btn\"},React.createElement(\"i\",{class:\"medium material-icons\",onClick:this.goBack},\"arrow_back\")),React.createElement(\"h1\",{className:\"title\"},\"Contenido de la caja\"),React.createElement(\"div\",{className:\"container-product-display\"},React.createElement(\"img\",{src:this.props.product.imgPath1,alt:\"product image\"}),React.createElement(\"h3\",null,this.props.product.name),React.createElement(\"p\",null,this.props.product.description),React.createElement(\"p\",null,\"La mudanza de esta caja ser\\xE1 el \",this.transformDate(),\" de \",this.props.product.bid.from,\" a \",this.props.product.bid.to),React.createElement(\"p\",null,\"Precio: \",this.props.product.price,\" \\u20AC\"),this.props.product.active&&this.props.product.owner._id!==this.props.userId?React.createElement(PPal,(_React$createElement={client:CLIENT,env:ENV,commit:true,currency:'EUR',total:this.props.product.price},_defineProperty(_React$createElement,\"total\",1),_defineProperty(_React$createElement,\"onSuccess\",onSuccess),_defineProperty(_React$createElement,\"onError\",onError),_defineProperty(_React$createElement,\"onCancel\",onCancel),_React$createElement)):this.props.product.buyer==this.props.userId?React.createElement(\"p\",null):React.createElement(\"p\",null,\"Esta caja es tuya\"),React.createElement(\"span\",null,!this.props.product.active&&this.props.userId==this.props.product.buyer?\"Comprado! Enhorabuena\":!this.props.product.active?\"Vendido\":\"\"),React.createElement(\"div\",{className:\"owner-container\"},React.createElement(\"div\",{className:\"profile-image\"},React.createElement(\"img\",{src:this.props.product.owner.imgPath})),React.createElement(\"p\",null,this.props.product.owner.username)),React.createElement(\"p\",null,\"Localizaci\\xF3n: \",this.props.product.bid.location.address),React.createElement(Productmapcontainer,{products:[this.props.product],zoomMap:18,centerMap:{lat:this.props.product.bid.location.coordinates[1],lng:this.props.product.bid.location.coordinates[0]}})));}else{return React.createElement(PreloaderSpinner,null);}}}]);return ShowProduct;}(Component);export default withRouter(ShowProduct);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/ShowProduct.jsx"],"names":["React","Component","Productmapcontainer","PreloaderSpinner","withRouter","PPal","moment","locale","s","process","env","PAYPAL_CLIENT_ID","CLIENT","sandbox","ENV","ShowProduct","props","goBack","history","transformDate","dateTransformed","product","bid","deadLine","format","state","productFromApp","then","setState","console","log","buyFromApp","_id","onSuccess","payment","onError","error","onCancel","data","imgPath1","name","description","from","to","price","active","owner","userId","buyer","imgPath","username","location","address","lat","coordinates","lng"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Productmapcontainer from \"../molecules/Productmapcontainer\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { withRouter } from 'react-router-dom'\nimport PPal from \"../organisms/PPal\";\nimport moment from \"moment\";\nimport 'moment/locale/es'\nmoment.locale('es')\nconst s=process.env.PAYPAL_CLIENT_ID;\n\nconst CLIENT = {\n  sandbox: \"AQcrq4YDWyfXU3sXAPunwF77twdTo_JaPFx2en6b48mJfwpzw1vRXcuJVcOD4P7CUcxstryIVCRj2_bB\"\n  // sandbox: `${process.env.REACT_APP_PAYPAL_CLIENT_ID}`\n};\nconst ENV = 'sandbox';\n\n\nclass ShowProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      product: this.props.product,\n    };\n  }\n  componentDidMount(){\n    this.props.productFromApp()\n    .then(product => {\n      this.setState({\n        ...this.state,\n        product: this.props.product,\n        \n      })\n      console.log(\"showproductmount\", this.props.product)\n    })\n  \n  }\n  change() {\n    this.props.productFromApp()\n    this.setState ({\n      ...this.state,\n      product: this.props.product,\n    })\n    console.log(\"%%%%\", this.state)\n  }\n  buy() {\n    this.props.buyFromApp(this.props.product._id)\n  }\n  goBack =()=> {\n    this.props.history.goBack()\n  }\n  transformDate = () => {\n    \n    moment.locale('es');\n    const dateTransformed= moment(this.props.product.bid.deadLine).format('LL')\n    return dateTransformed\n  }\n\n  render() {\n    console.log(process.env)\n    const onSuccess = (payment) => {\n      this.props.buyFromApp(this.props.product._id)\n      .then(()=>\n       console.log('Successful payment!', payment)\n      )\n      \n\n    }\n    \n  const onError = (error) =>\n    console.log('Erroneous payment OR failed to load script!', error);\n  const onCancel = (data) =>\n    console.log('Cancelled payment!', data);\n    console.log(CLIENT)\n\n    if(this.props.product) {\n      return (\n     \n        <div className=\"display-product\">\n        <a className=\"back-btn\"><i class=\"medium material-icons\" onClick={this.goBack}>arrow_back</i></a>\n        <h1 className=\"title\">Contenido de la caja</h1>\n        <div className=\"container-product-display\">\n          <img src={this.props.product.imgPath1} alt=\"product image\"></img>\n          {/* <img src={this.props.product.imgPath2} alt=\"product image\"></img>\n          <img src={this.props.product.imgPath3} alt=\"product image\"></img> */}\n          <h3>{this.props.product.name}</h3>\n          <p>{this.props.product.description}</p>\n          <p>La mudanza de esta caja será el {this.transformDate()} de {this.props.product.bid.from} a {this.props.product.bid.to}</p>\n          <p>Precio: {this.props.product.price} €</p>\n          \n          {/* {this.props.product.active && this.props.product.owner._id!=this.props.userId &&(<button onClick={e => this.buy(e)}>Comprar</button>)} */}\n          {(this.props.product.active && this.props.product.owner._id!==this.props.userId) ?\n           \n              \n              <PPal\n      client={CLIENT}\n      env={ENV}\n      commit={true}\n      currency={'EUR'}\n      total={this.props.product.price}\n      total={1}\n      onSuccess={onSuccess}\n      onError={onError}\n      onCancel={onCancel}\n     \n\n      ></PPal>\n              \n            \n            :\n            this.props.product.buyer==this.props.userId?\n            <p></p>\n            :\n            <p>Esta caja es tuya</p>\n            }\n          <span>{!this.props.product.active && this.props.userId==this.props.product.buyer? \"Comprado! Enhorabuena\" : !this.props.product.active? \"Vendido\": \"\"}</span>\n          <div className=\"owner-container\">\n            <div className=\"profile-image\">\n          <img src={this.props.product.owner.imgPath}></img>\n            </div>\n          <p>{this.props.product.owner.username}</p>\n          </div>\n          <p>Localización: {this.props.product.bid.location.address}</p>\n          \n          <Productmapcontainer products={[this.props.product]} zoomMap={18} centerMap={{lat: this.props.product.bid.location.coordinates[1], lng: this.props.product.bid.location.coordinates[0]}} ></Productmapcontainer>\n          \n        </div>\n        </div>\n      );\n    }\n    else {\n      \n      return (\n \n        <PreloaderSpinner></PreloaderSpinner>\n        \n     \n      )\n    }\n  }\n}\nexport default withRouter(ShowProduct)"]},"metadata":{},"sourceType":"module"}