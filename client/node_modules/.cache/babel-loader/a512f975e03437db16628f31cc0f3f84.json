{"ast":null,"code":"import _defineProperty from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import Productmapcontainer from\"../molecules/Productmapcontainer\";import PreloaderSpinner from\"../atoms/PreloaderSpinner\";import{MediaBox}from\"react-materialize\";import{withRouter,NavLink}from\"react-router-dom\";import PPal from\"../organisms/PPal\";import moment from\"moment\";import\"moment/locale/es\";moment.locale(\"es\");var s=process.env.PAYPAL_CLIENT_ID;var CLIENT={sandbox:\"AQcrq4YDWyfXU3sXAPunwF77twdTo_JaPFx2en6b48mJfwpzw1vRXcuJVcOD4P7CUcxstryIVCRj2_bB\"// sandbox: `${process.env.REACT_APP_PAYPAL_CLIENT_ID}`\n};var ENV=\"sandbox\";var ShowProduct=/*#__PURE__*/function(_Component){_inherits(ShowProduct,_Component);function ShowProduct(props){var _this;_classCallCheck(this,ShowProduct);_this=_possibleConstructorReturn(this,_getPrototypeOf(ShowProduct).call(this,props));_this.goBack=function(){_this.props.history.goBack();};_this.transformDate=function(){moment.locale(\"es\");var dateTransformed=moment(_this.props.product.bid.deadLine).format(\"LL\");return dateTransformed;};_this.state={product:_this.props.product};return _this;}_createClass(ShowProduct,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.productFromApp().then(function(product){_this2.setState(_objectSpread({},_this2.state,{product:_this2.props.product}));console.log(\"showproductmount\",_this2.props.product);});}},{key:\"change\",value:function change(){this.props.productFromApp();this.setState(_objectSpread({},this.state,{product:this.props.product}));console.log(\"%%%%\",this.state);}},{key:\"buy\",value:function buy(){this.props.buyFromApp(this.props.product._id);}},{key:\"render\",value:function render(){var _this3=this;var onSuccess=function onSuccess(payment){_this3.props.buyFromApp(_this3.props.product._id).then(function(){return console.log(\"Successful payment!\",payment);});};var onError=function onError(error){return console.log(\"Erroneous payment OR failed to load script!\",error);};var onCancel=function onCancel(data){return console.log(\"Cancelled payment!\",data);};console.log(CLIENT);if(this.props.product){var _React$createElement;return React.createElement(\"div\",{className:\"display-product slide-in-bck-center\"},React.createElement(\"a\",{className:\"back-btn\"},React.createElement(\"i\",{class:\"medium material-icons\",onClick:this.goBack},\"arrow_back\")),React.createElement(\"h1\",{className:\"title\"},\"Contenido de la caja\"),React.createElement(\"div\",{className:\"product-container\"},React.createElement(\"div\",{className:\"container-product-display\"},React.createElement(\"div\",{className:\"img-container\"},React.createElement(MediaBox,null,React.createElement(\"img\",{src:this.props.product.imgPath1,alt:\"product image\"}))),React.createElement(\"div\",{className:\"text-container\"},React.createElement(\"h3\",null,this.props.product.name),React.createElement(\"p\",null,this.props.product.description),React.createElement(\"p\",null,\"Precio: \",React.createElement(\"span\",null,this.props.product.price,\" \\u20AC\")),React.createElement(\"div\",{className:\"owner-container\"},React.createElement(\"div\",{className:\"profile-image\"},React.createElement(\"img\",{className:\"product-image\",src:this.props.product.owner.imgPath})),React.createElement(\"p\",null,this.props.product.owner.username)),this.props.product.active&&this.props.product.owner._id!==this.props.userId?React.createElement(PPal,(_React$createElement={client:CLIENT,env:ENV,commit:true,currency:\"EUR\",total:this.props.product.price},_defineProperty(_React$createElement,\"total\",1),_defineProperty(_React$createElement,\"onSuccess\",onSuccess),_defineProperty(_React$createElement,\"onError\",onError),_defineProperty(_React$createElement,\"onCancel\",onCancel),_React$createElement)):this.props.product.buyer==this.props.userId?React.createElement(\"p\",null):React.createElement(\"p\",null,\"Esta caja es tuya\"),React.createElement(\"span\",null,!this.props.product.active&&this.props.userId==this.props.product.buyer?\"Comprado! Enhorabuena\":!this.props.product.active?\"Vendido\":\"\"),React.createElement(NavLink,{to:\"/bid/\".concat(this.props.product.bid._id),className:\"link-bid\"},\"Ir a su mudanza\"))),React.createElement(\"div\",{className:\"info-container\"},React.createElement(\"div\",{className:\"deadline-container\"},React.createElement(\"p\",null,\"Esta caja se recoger\\xE1 el \",React.createElement(\"span\",null,this.transformDate()),\" de \",React.createElement(\"span\",null,this.props.product.bid.from),\" a \",React.createElement(\"span\",null,this.props.product.bid.to)),React.createElement(\"p\",null,\"Localizaci\\xF3n: \",React.createElement(\"span\",null,this.props.product.bid.location.address))),React.createElement(Productmapcontainer,{products:[this.props.product],zoomMap:19,mapSize:[70,400],centerMap:{lat:this.props.product.bid.location.coordinates[1],lng:this.props.product.bid.location.coordinates[0]}}))));}else{return React.createElement(PreloaderSpinner,null);}}}]);return ShowProduct;}(Component);export default withRouter(ShowProduct);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/ShowProduct.jsx"],"names":["React","Component","Productmapcontainer","PreloaderSpinner","MediaBox","withRouter","NavLink","PPal","moment","locale","s","process","env","PAYPAL_CLIENT_ID","CLIENT","sandbox","ENV","ShowProduct","props","goBack","history","transformDate","dateTransformed","product","bid","deadLine","format","state","productFromApp","then","setState","console","log","buyFromApp","_id","onSuccess","payment","onError","error","onCancel","data","imgPath1","name","description","price","owner","imgPath","username","active","userId","buyer","from","to","location","address","lat","coordinates","lng"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Productmapcontainer from \"../molecules/Productmapcontainer\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { MediaBox } from \"react-materialize\";\nimport { withRouter, NavLink } from \"react-router-dom\";\nimport PPal from \"../organisms/PPal\";\nimport moment from \"moment\";\nimport \"moment/locale/es\";\nmoment.locale(\"es\");\nconst s = process.env.PAYPAL_CLIENT_ID;\n\nconst CLIENT = {\n  sandbox:\n    \"AQcrq4YDWyfXU3sXAPunwF77twdTo_JaPFx2en6b48mJfwpzw1vRXcuJVcOD4P7CUcxstryIVCRj2_bB\"\n  // sandbox: `${process.env.REACT_APP_PAYPAL_CLIENT_ID}`\n};\nconst ENV = \"sandbox\";\n\nclass ShowProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      product: this.props.product\n    };\n  }\n  componentDidMount() {\n    this.props.productFromApp().then(product => {\n      this.setState({\n        ...this.state,\n        product: this.props.product\n      });\n      console.log(\"showproductmount\", this.props.product);\n    });\n  }\n  change() {\n    this.props.productFromApp();\n    this.setState({\n      ...this.state,\n      product: this.props.product\n    });\n    console.log(\"%%%%\", this.state);\n  }\n  buy() {\n    this.props.buyFromApp(this.props.product._id);\n  }\n  goBack = () => {\n    this.props.history.goBack();\n  };\n  transformDate = () => {\n    moment.locale(\"es\");\n    const dateTransformed = moment(this.props.product.bid.deadLine).format(\n      \"LL\"\n    );\n    return dateTransformed;\n  };\n\n  render() {\n    const onSuccess = payment => {\n      this.props\n        .buyFromApp(this.props.product._id)\n        .then(() => console.log(\"Successful payment!\", payment));\n    };\n\n    const onError = error =>\n      console.log(\"Erroneous payment OR failed to load script!\", error);\n    const onCancel = data => console.log(\"Cancelled payment!\", data);\n    console.log(CLIENT);\n\n    if (this.props.product) {\n      return (\n        <div className=\"display-product slide-in-bck-center\">\n          <a className=\"back-btn\">\n            <i class=\"medium material-icons\" onClick={this.goBack}>\n              arrow_back\n            </i>\n          </a>\n          <h1 className=\"title\">Contenido de la caja</h1>\n          <div className=\"product-container\">\n            <div className=\"container-product-display\">\n              <div className=\"img-container\">\n               \n              <MediaBox >\n            <img src={this.props.product.imgPath1} alt=\"product image\"></img>\n            </MediaBox>\n            </div>\n            <div className=\"text-container\">\n\n            <h3>{this.props.product.name}</h3>\n            <p>{this.props.product.description}</p>\n            <p>Precio: <span>{this.props.product.price} €</span></p>\n            <div className=\"owner-container\">\n              <div className=\"profile-image\">\n            \n              <img className=\"product-image\" src={this.props.product.owner.imgPath}></img>\n\n            \n\n              </div>\n              <p>{this.props.product.owner.username}</p>\n            </div>\n            {/* {this.props.product.active && this.props.product.owner._id!=this.props.userId &&(<button onClick={e => this.buy(e)}>Comprar</button>)} */}\n            {this.props.product.active &&\n            this.props.product.owner._id !== this.props.userId ? (\n              <PPal\n                client={CLIENT}\n                env={ENV}\n                commit={true}\n                currency={\"EUR\"}\n                total={this.props.product.price}\n                total={1}\n                onSuccess={onSuccess}\n                onError={onError}\n                onCancel={onCancel}\n              ></PPal>\n            ) : this.props.product.buyer == this.props.userId ? (\n              <p></p>\n            ) : (\n              <p>Esta caja es tuya</p>\n            )}\n            <span>\n              {!this.props.product.active &&\n              this.props.userId == this.props.product.buyer\n                ? \"Comprado! Enhorabuena\"\n                : !this.props.product.active\n                ? \"Vendido\"\n                : \"\"}\n            </span>\n            <NavLink to={`/bid/${this.props.product.bid._id}`} className=\"link-bid\">Ir a su mudanza</NavLink>\n            </div>\n            </div>\n\n\n            <div className=\"info-container\">\n           \n            <div className=\"deadline-container\">\n            <p>\n              Esta caja se recogerá el <span>{this.transformDate()}</span> de <span>\n              {this.props.product.bid.from}</span> a <span>{this.props.product.bid.to}</span>\n            </p>\n            <p>Localización: <span>{this.props.product.bid.location.address}</span></p>\n            </div>\n            <Productmapcontainer\n              products={[this.props.product]}\n              zoomMap={19}\n              mapSize={[70,400]}\n              centerMap={{\n                lat: this.props.product.bid.location.coordinates[1],\n                lng: this.props.product.bid.location.coordinates[0]\n              }}\n            ></Productmapcontainer>\n          </div>\n          </div>\n          </div>\n       \n      );\n    } else {\n      return <PreloaderSpinner></PreloaderSpinner>;\n    }\n  }\n}\nexport default withRouter(ShowProduct);\n"]},"metadata":{},"sourceType":"module"}