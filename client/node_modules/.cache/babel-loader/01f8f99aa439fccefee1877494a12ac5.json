{"ast":null,"code":"import _defineProperty from \"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/fer/ironhack/week_8/jakku/client/src/components/pages/ShowProduct.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport Productmapcontainer from \"../molecules/Productmapcontainer\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { withRouter } from 'react-router-dom';\nimport PPal from \"../organisms/PPal\";\nimport moment from \"moment\";\nimport 'moment/locale/es';\nmoment.locale('es');\nconst CLIENT = {\n  sandbox: \"\".concat(process.env.REACT_APP_PAYPAL_CLIENT_ID)\n};\nconst ENV = \"sandbox\";\n\nclass ShowProduct extends Component {\n  constructor(props) {\n    super(props);\n\n    this.goBack = () => {\n      this.props.history.goBack();\n    };\n\n    this.transformDate = () => {\n      moment.locale('es');\n      const dateTransformed = moment(this.props.product.bid.deadLine).format('LL');\n      return dateTransformed;\n    };\n\n    this.state = {\n      product: this.props.product\n    };\n  }\n\n  componentDidMount() {\n    this.props.productFromApp().then(product => {\n      this.setState(_objectSpread({}, this.state, {\n        product: this.props.product\n      }));\n      console.log(\"showproductmount\", this.props.product);\n    });\n  }\n\n  change() {\n    this.props.productFromApp();\n    this.setState(_objectSpread({}, this.state, {\n      product: this.props.product\n    }));\n    console.log(\"%%%%\", this.state);\n  }\n\n  buy() {\n    this.props.buyFromApp(this.props.product._id);\n  }\n\n  render() {\n    const onSuccess = payment => {\n      console.log('Successful payment!', payment);\n    };\n\n    const onError = error => console.log('Erroneous payment OR failed to load script!', error);\n\n    const onCancel = data => console.log('Cancelled payment!', data);\n\n    if (this.props.product) {\n      return React.createElement(\"div\", {\n        className: \"display-product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"back-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"medium material-icons\",\n        onClick: this.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"arrow_back\")), React.createElement(\"h1\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Contenido de la caja\"), React.createElement(\"div\", {\n        className: \"container-product-display\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.product.imgPath1,\n        alt: \"product image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, this.props.product.name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.props.product.description), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"La mudanza de esta caja ser\\xE1 el \", this.transformDate(), \" de \", this.props.product.bid.from, \" a \", this.props.product.bid.to), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Precio: \", this.props.product.price, \" \\u20AC\"), this.props.product.active && this.props.product.owner._id !== this.props.userId ? React.createElement(PPal, {\n        client: CLIENT,\n        env: ENV,\n        commit: true,\n        currency: 'EUR',\n        total: this.props.product.price,\n        onSuccess: onSuccess,\n        onError: onError,\n        onCancel: onCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }) : this.props.product.buyer == this.props.userId ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }) : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Esta caja es tuya\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, !this.props.product.active && this.props.userId == this.props.product.buyer ? \"Comprado! Enhorabuena\" : !this.props.product.active ? \"Vendido\" : \"\"), React.createElement(\"div\", {\n        className: \"owner-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"profile-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.product.owner.imgPath,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, this.props.product.owner.username)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Localizaci\\xF3n: \", this.props.product.bid.location.address), React.createElement(Productmapcontainer, {\n        products: [this.props.product],\n        zoomMap: 18,\n        centerMap: {\n          lat: this.props.product.bid.location.coordinates[1],\n          lng: this.props.product.bid.location.coordinates[0]\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(PreloaderSpinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default withRouter(ShowProduct);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/ShowProduct.jsx"],"names":["React","Component","Productmapcontainer","PreloaderSpinner","withRouter","PPal","moment","locale","CLIENT","sandbox","process","env","REACT_APP_PAYPAL_CLIENT_ID","ENV","ShowProduct","constructor","props","goBack","history","transformDate","dateTransformed","product","bid","deadLine","format","state","componentDidMount","productFromApp","then","setState","console","log","change","buy","buyFromApp","_id","render","onSuccess","payment","onError","error","onCancel","data","imgPath1","name","description","from","to","price","active","owner","userId","buyer","imgPath","username","location","address","lat","coordinates","lng"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Productmapcontainer from \"../molecules/Productmapcontainer\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { withRouter } from 'react-router-dom'\nimport PPal from \"../organisms/PPal\";\nimport moment from \"moment\";\nimport 'moment/locale/es'\nmoment.locale('es')\n\nconst CLIENT = {\n  sandbox: `${process.env.REACT_APP_PAYPAL_CLIENT_ID}`\n};\nconst ENV = \"sandbox\";\n\n\nclass ShowProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      product: this.props.product,\n    };\n  }\n  componentDidMount(){\n    this.props.productFromApp()\n    .then(product => {\n      this.setState({\n        ...this.state,\n        product: this.props.product,\n        \n      })\n      console.log(\"showproductmount\", this.props.product)\n    })\n  \n  }\n  change() {\n    this.props.productFromApp()\n    this.setState ({\n      ...this.state,\n      product: this.props.product,\n    })\n    console.log(\"%%%%\", this.state)\n  }\n  buy() {\n    this.props.buyFromApp(this.props.product._id)\n  }\n  goBack =()=> {\n    this.props.history.goBack()\n  }\n  transformDate = () => {\n    \n    moment.locale('es');\n    const dateTransformed= moment(this.props.product.bid.deadLine).format('LL')\n    return dateTransformed\n  }\n\n  render() {\n    const onSuccess = (payment) => {\n      console.log('Successful payment!', payment);\n      \n\n    }\n    \n  const onError = (error) =>\n    console.log('Erroneous payment OR failed to load script!', error);\n  const onCancel = (data) =>\n    console.log('Cancelled payment!', data);\n\n\n    if(this.props.product) {\n      return (\n     \n        <div className=\"display-product\">\n        <a className=\"back-btn\"><i class=\"medium material-icons\" onClick={this.goBack}>arrow_back</i></a>\n        <h1 className=\"title\">Contenido de la caja</h1>\n        <div className=\"container-product-display\">\n          <img src={this.props.product.imgPath1} alt=\"product image\"></img>\n          {/* <img src={this.props.product.imgPath2} alt=\"product image\"></img>\n          <img src={this.props.product.imgPath3} alt=\"product image\"></img> */}\n          <h3>{this.props.product.name}</h3>\n          <p>{this.props.product.description}</p>\n          <p>La mudanza de esta caja será el {this.transformDate()} de {this.props.product.bid.from} a {this.props.product.bid.to}</p>\n          <p>Precio: {this.props.product.price} €</p>\n          \n          {/* {this.props.product.active && this.props.product.owner._id!=this.props.userId &&(<button onClick={e => this.buy(e)}>Comprar</button>)} */}\n          {(this.props.product.active && this.props.product.owner._id!==this.props.userId) ?\n           \n              \n              <PPal\n      client={CLIENT}\n      env={ENV}\n      commit={true}\n      currency={'EUR'}\n      total={this.props.product.price}\n      onSuccess={onSuccess}\n      onError={onError}\n      onCancel={onCancel}\n      ></PPal>\n              \n            \n            :\n            this.props.product.buyer==this.props.userId?\n            <p></p>\n            :\n            <p>Esta caja es tuya</p>\n            }\n          <span>{!this.props.product.active && this.props.userId==this.props.product.buyer? \"Comprado! Enhorabuena\" : !this.props.product.active? \"Vendido\": \"\"}</span>\n          <div className=\"owner-container\">\n            <div className=\"profile-image\">\n          <img src={this.props.product.owner.imgPath}></img>\n            </div>\n          <p>{this.props.product.owner.username}</p>\n          </div>\n          <p>Localización: {this.props.product.bid.location.address}</p>\n          \n          <Productmapcontainer products={[this.props.product]} zoomMap={18} centerMap={{lat: this.props.product.bid.location.coordinates[1], lng: this.props.product.bid.location.coordinates[0]}} ></Productmapcontainer>\n          \n        </div>\n        </div>\n      );\n    }\n    else {\n      \n      return (\n \n        <PreloaderSpinner></PreloaderSpinner>\n        \n     \n      )\n    }\n  }\n}\nexport default withRouter(ShowProduct)"]},"metadata":{},"sourceType":"module"}