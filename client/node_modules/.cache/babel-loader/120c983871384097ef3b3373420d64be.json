{"ast":null,"code":"import _defineProperty from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import PreloaderSpinner from\"../atoms/PreloaderSpinner\";import{Button,Tabs,Tab,Preloader}from\"react-materialize\";import{withRouter}from\"react-router-dom\";import ShowBid from\"./ShowMyBid\";import AllProducts from\"../organisms/AllProducts\";import SearchBar from\"../atoms/SearchBar\";import Bidmapcontainer from\"../molecules/Bidmapcontainer\";import RoutesService from\"../../RoutesService\";import ModalLoginFirst from\"../auth/ModalLoginFirst\";import AllProductsAndSearch from\"../organisms/AllProductsAndSearch\";import ButtonAdd from\"../atoms/ButtonAdd\";var HomeLogged=/*#__PURE__*/function(_Component){_inherits(HomeLogged,_Component);function HomeLogged(props){var _this;_classCallCheck(this,HomeLogged);_this=_possibleConstructorReturn(this,_getPrototypeOf(HomeLogged).call(this,props));_this.state={products:props.products,searchProducts:props.products,bids:null};_this.router=new RoutesService();return _this;}_createClass(HomeLogged,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.router.getProducts().then(function(response){var bids=response.map(function(product){return product.bid;});bids.forEach(function(bid){return bid.productsList.map(function(id){return response.filter(function(product){return product._id===id;});});});console.log(\"bids\",bids);var bidsId=[];bids=bids.filter(function(bid){if(bidsId.includes(bid._id)){console.log(\"se ripite\",bid._id);return false;}else{console.log(\"no se ripite\",bid._id);bidsId.push(bid._id);return true;}});response.sort(function(a,b){return Math.random()-0.5;});_this2.setState(_objectSpread({},_this2.state,{products:response,bids:bids,centerMap:_this2.props.centerMap,loaded:true}));});}},{key:\"render\",value:function render(){if(!this.props.user.bid){return React.createElement(\"div\",{className:\"home home-logged\"},React.createElement(\"div\",{className:\"title-container\"},React.createElement(\"h1\",null,\"Si te acabas de mudar\",React.createElement(\"br\",null),\"o est\\xE1s a punto de mudarte,\",React.createElement(\"br\",null),\"podemos ayudarte\"),React.createElement(\"img\",{src:\"bkg-img.svg\",alt:\"background image\"})),React.createElement(Tabs,{className:\"tab-demo z-depth-1 tabs-fixed-width tab-container\"},React.createElement(Tab,{title:\"Me voy a mudar\",className:\"me-mudo\"},React.createElement(\"div\",{className:\"mudo-container-login\"},React.createElement(\"h3\",null,\"Crea tu mudanza para poder poner cajas a la venta\"),React.createElement(ButtonAdd,{bid:true}))),React.createElement(Tab,{title:\"Me acabo de mudar\",active:true},this.state.products&&this.state.bids&&this.state.centerMap?React.createElement(AllProductsAndSearch,{bids:this.state.bids,centerMap:this.props.centerMap,products:this.props.products}):React.createElement(PreloaderSpinner,null))));}else{return React.createElement(\"div\",{className:\"home home-logged\"},React.createElement(\"div\",{className:\"title-container\"},React.createElement(\"h1\",null,\"Hacemos tu mudanza \",React.createElement(\"br\",null),\"m\\xE1s f\\xE1cil\"),React.createElement(\"img\",{src:\"bkg-img.svg\",alt:\"background image\"})),React.createElement(Tabs,{className:\"tab-demo z-depth-1 tabs-fixed-width tab-container\"},React.createElement(Tab,{title:\"Me voy a mudar\",className:\"me-mudo\"},React.createElement(\"div\",{className:\"mudo-container-login\"},React.createElement(\"h3\",null,\"Tienes una mudanza creada. Puedes a\\xF1adir cajas a la venta.\"),React.createElement(ButtonAdd,{product:true}))),React.createElement(Tab,{title:\"Me acabo de mudar\",active:true},this.state.loaded&&this.state.bids&&this.state.products&&this.state.centerMap?React.createElement(AllProductsAndSearch,{bids:this.state.bids,centerMap:this.state.centerMap,products:this.state.products}):React.createElement(PreloaderSpinner,null))));}}}]);return HomeLogged;}(Component);export default withRouter(HomeLogged);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/HomeLogged.jsx"],"names":["React","Component","PreloaderSpinner","Button","Tabs","Tab","Preloader","withRouter","ShowBid","AllProducts","SearchBar","Bidmapcontainer","RoutesService","ModalLoginFirst","AllProductsAndSearch","ButtonAdd","HomeLogged","props","state","products","searchProducts","bids","router","getProducts","then","response","map","product","bid","forEach","productsList","id","filter","_id","console","log","bidsId","includes","push","sort","a","b","Math","random","setState","centerMap","loaded","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { Button, Tabs, Tab, Preloader } from \"react-materialize\";\nimport { withRouter } from \"react-router-dom\";\nimport ShowBid from \"./ShowMyBid\";\nimport AllProducts from \"../organisms/AllProducts\";\nimport SearchBar from \"../atoms/SearchBar\";\nimport Bidmapcontainer from \"../molecules/Bidmapcontainer\";\nimport RoutesService from \"../../RoutesService\";\nimport ModalLoginFirst from \"../auth/ModalLoginFirst\";\nimport AllProductsAndSearch from \"../organisms/AllProductsAndSearch\";\nimport ButtonAdd from \"../atoms/ButtonAdd\";\n\nclass HomeLogged extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: props.products,\n      searchProducts: props.products,\n      bids: null\n    };\n    this.router = new RoutesService();\n  }\n\n  componentDidMount() {\n    this.router.getProducts().then(response => {\n      let bids = response.map(product => product.bid);\n      bids.forEach(bid =>\n        bid.productsList.map(id =>\n          response.filter(product => product._id === id)\n        )\n      );\n      console.log(\"bids\", bids)\n      let bidsId = [];\n      bids = bids.filter(bid => {\n        if (bidsId.includes(bid._id)) {\n          console.log(\"se ripite\", bid._id)\n          return false;\n        } else {\n          \n          console.log(\"no se ripite\", bid._id)\n          bidsId.push(bid._id);\n          return true;\n        }\n      });\n      response.sort((a, b) => Math.random() - 0.5);\n      this.setState({\n        ...this.state,\n        products: response,\n        bids: bids,\n        centerMap: this.props.centerMap,\n        loaded: true\n      });\n    });\n  }\n\n  render() {\n    if (!this.props.user.bid) {\n      return (\n        <div className=\"home home-logged\">\n          <div className=\"title-container\">\n            <h1>\n              Si te acabas de mudar<br></br>o estás a punto de mudarte,<br></br>\n              podemos ayudarte\n            </h1>\n            <img src=\"bkg-img.svg\" alt=\"background image\"></img>\n          </div>\n          <Tabs className=\"tab-demo z-depth-1 tabs-fixed-width tab-container\">\n            <Tab title=\"Me voy a mudar\" className=\"me-mudo\">\n              <div className=\"mudo-container-login\">\n                <h3>Crea tu mudanza para poder poner cajas a la venta</h3>\n                <ButtonAdd bid={true}></ButtonAdd>\n              </div>\n            </Tab>\n\n            <Tab title=\"Me acabo de mudar\" active>\n              {this.state.products &&\n              this.state.bids &&\n              this.state.centerMap ? (\n                <AllProductsAndSearch\n                  bids={this.state.bids}\n                  centerMap={this.props.centerMap}\n                  products={this.props.products}\n                ></AllProductsAndSearch>\n              ) : (\n                <PreloaderSpinner></PreloaderSpinner>\n              )}\n            </Tab>\n          </Tabs>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"home home-logged\">\n          <div className=\"title-container\">\n            <h1>Hacemos tu mudanza <br></br>más fácil</h1>\n            <img src=\"bkg-img.svg\" alt=\"background image\"></img>\n          </div>\n\n          \n\n          <Tabs className=\"tab-demo z-depth-1 tabs-fixed-width tab-container\">\n            <Tab title=\"Me voy a mudar\" className=\"me-mudo\">\n              <div className=\"mudo-container-login\">\n                <h3>Tienes una mudanza creada. Puedes añadir cajas a la venta.</h3>\n                <ButtonAdd product={true}></ButtonAdd>\n              </div>\n            </Tab>\n\n            <Tab title=\"Me acabo de mudar\" active>\n              {this.state.loaded &&\n              this.state.bids &&\n              this.state.products &&\n              this.state.centerMap ? (\n                <AllProductsAndSearch\n                  bids={this.state.bids}\n                  centerMap={this.state.centerMap}\n                  products={this.state.products}\n                ></AllProductsAndSearch>\n              ) : (\n                <PreloaderSpinner></PreloaderSpinner>\n              )}\n            </Tab>\n          </Tabs>\n        </div>\n      );\n    }\n  }\n}\n\nexport default withRouter(HomeLogged);\n"]},"metadata":{},"sourceType":"module"}