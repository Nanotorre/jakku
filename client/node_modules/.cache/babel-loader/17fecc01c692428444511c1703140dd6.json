{"ast":null,"code":"import _defineProperty from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import{NavLink,withRouter}from\"react-router-dom\";import{Tabs,Tab,Col,Row,Preloader}from\"react-materialize\";import AllProducts from\"../organisms/AllProducts\";import SearchBar from\"../atoms/SearchBar\";import Bidmapcontainer from\"../molecules/Bidmapcontainer\";import RoutesService from\"../../RoutesService\";import ModalLogin from\"../auth/ModalLogin\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);function Home(props){var _this;_classCallCheck(this,Home);_this=_possibleConstructorReturn(this,_getPrototypeOf(Home).call(this,props));_this.state={bids:null,products:null};_this.router=new RoutesService();return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.router.getProducts().then(function(response){var bids=response.map(function(product){return product.bid;});bids.forEach(function(bid){return bid.productsList.map(function(id){return response.filter(function(product){return product._id===id;});});});var bidsId=[];bids=bids.filter(function(bid){if(bidsId.includes(bid._id)){return false;}else{bidsId.push(bid._id);return true;}});_this2.setState(_objectSpread({},_this2.state,{products:response,bids:bids}));console.log(_this2.state);});}},{key:\"render\",value:function render(){var _this3=this;// if(false){\n//   this.props.history.push('/ruta')\n// }\nreturn React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Si te acabas de mudar o est\\xE1s a punto de mudarte, podemos ayudarte\"),React.createElement(Tabs,{className:\"tab-demo z-depth-1 tabs-fixed-width\"},React.createElement(Tab,{title:\"Me voy a mudar\"}),React.createElement(Tab,{title:\"Me acabo de mudar\",active:true},this.props.products&&this.state.bids?React.createElement(\"div\",null,React.createElement(SearchBar,{updateSearch:function updateSearch(searchText){return _this3.makeSearch(searchText);}// updateInStock={stockCheckbox => this.changeStock(stockCheckbox)}\n}),React.createElement(Bidmapcontainer,{bids:this.state.bids,centerMap:this.props.centerMap}),React.createElement(AllProducts,{products:this.props.products})):React.createElement(\"div\",null,React.createElement(Preloader,{flashing:true,size:\"small\"}),React.createElement(ModalLogin,null)))));}}]);return Home;}(Component);export default withRouter(Home);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/Home.jsx"],"names":["React","Component","NavLink","withRouter","Tabs","Tab","Col","Row","Preloader","AllProducts","SearchBar","Bidmapcontainer","RoutesService","ModalLogin","Home","props","state","bids","products","router","getProducts","then","response","map","product","bid","forEach","productsList","id","filter","_id","bidsId","includes","push","setState","console","log","searchText","makeSearch","centerMap"],"mappings":"w/CAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,kBAApC,CACA,OAASC,IAAT,CAAeC,GAAf,CAAoBC,GAApB,CAAyBC,GAAzB,CAA8BC,SAA9B,KAA+C,mBAA/C,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,eAAP,KAA4B,8BAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,qBAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,oBAAvB,C,GAEMC,CAAAA,I,8DACJ,cAAYC,KAAZ,CAAmB,sCACjB,sEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,IADK,CAEXC,QAAQ,CAAE,IAFC,CAAb,CAIA,MAAKC,MAAL,CAAa,GAAIP,CAAAA,aAAJ,EAAb,CANiB,aAOlB,C,8EAEmB,iBAClB,KAAKO,MAAL,CAAYC,WAAZ,GACCC,IADD,CACM,SAAAC,QAAQ,CAAG,CACf,GAAIL,CAAAA,IAAI,CAAEK,QAAQ,CAACC,GAAT,CAAa,SAAAC,OAAO,QAAGA,CAAAA,OAAO,CAACC,GAAX,EAApB,CAAV,CACAR,IAAI,CAACS,OAAL,CAAa,SAAAD,GAAG,QAAGA,CAAAA,GAAG,CAACE,YAAJ,CAAiBJ,GAAjB,CAAqB,SAAAK,EAAE,QAAGN,CAAAA,QAAQ,CAACO,MAAT,CAAgB,SAAAL,OAAO,QAAGA,CAAAA,OAAO,CAACM,GAAR,GAAcF,EAAjB,EAAvB,CAAH,EAAvB,CAAH,EAAhB,EACA,GAAIG,CAAAA,MAAM,CAAE,EAAZ,CACAd,IAAI,CAAEA,IAAI,CAACY,MAAL,CAAY,SAAAJ,GAAG,CAAG,CACtB,GAAGM,MAAM,CAACC,QAAP,CAAgBP,GAAG,CAACK,GAApB,CAAH,CAA6B,CAC3B,MAAO,MAAP,CACD,CAFD,IAGK,CACHC,MAAM,CAACE,IAAP,CAAYR,GAAG,CAACK,GAAhB,EACA,MAAO,KAAP,CACD,CACF,CARK,CAAN,CASA,MAAI,CAACI,QAAL,kBACK,MAAI,CAAClB,KADV,EAEEE,QAAQ,CAAEI,QAFZ,CAGEL,IAAI,CAAEA,IAHR,IAKAkB,OAAO,CAACC,GAAR,CAAY,MAAI,CAACpB,KAAjB,EACD,CApBD,EAqBD,C,uCAGQ,iBACP;AACA;AACA;AAEA,MACE,gCACE,sGADF,CAME,oBAAC,IAAD,EAAM,SAAS,CAAC,qCAAhB,EACE,oBAAC,GAAD,EAAK,KAAK,CAAC,gBAAX,EADF,CAEE,oBAAC,GAAD,EAAK,KAAK,CAAC,mBAAX,CAA+B,MAAM,KAArC,EACG,KAAKD,KAAL,CAAWG,QAAX,EAAuB,KAAKF,KAAL,CAAWC,IAAlC,CACC,+BAEE,oBAAC,SAAD,EACE,YAAY,CAAE,sBAAAoB,UAAU,QAAI,CAAA,MAAI,CAACC,UAAL,CAAgBD,UAAhB,CAAJ,EACxB;AAFF,EAFF,CAME,oBAAC,eAAD,EACE,IAAI,CAAE,KAAKrB,KAAL,CAAWC,IADnB,CAEE,SAAS,CAAE,KAAKF,KAAL,CAAWwB,SAFxB,EANF,CAWE,oBAAC,WAAD,EAAa,QAAQ,CAAE,KAAKxB,KAAL,CAAWG,QAAlC,EAXF,CADD,CAeC,+BACM,oBAAC,SAAD,EAAW,QAAQ,KAAnB,CAAoB,IAAI,CAAC,OAAzB,EADN,CAEA,oBAAC,UAAD,MAFA,CAhBJ,CAFF,CANF,CADF,CAqCD,C,kBA7EgBjB,S,EAgFnB,cAAeE,CAAAA,UAAU,CAACW,IAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport { Tabs, Tab, Col, Row, Preloader } from \"react-materialize\";\nimport AllProducts from \"../organisms/AllProducts\";\nimport SearchBar from \"../atoms/SearchBar\";\nimport Bidmapcontainer from \"../molecules/Bidmapcontainer\";\nimport RoutesService from \"../../RoutesService\";\nimport ModalLogin from \"../auth/ModalLogin\";\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bids: null,\n      products: null\n    };\n    this.router= new RoutesService;\n  }\n\n  componentDidMount() {\n    this.router.getProducts()\n    .then(response=> {\n      let bids= response.map(product=> product.bid);\n      bids.forEach(bid=> bid.productsList.map(id=> response.filter(product=> product._id===id)))\n      let bidsId= []\n      bids= bids.filter(bid=> {\n        if(bidsId.includes(bid._id)) {\n          return false\n        }\n        else {\n          bidsId.push(bid._id);\n          return true\n        }\n      })\n      this.setState({\n        ...this.state,\n        products: response,\n        bids: bids\n      })\n      console.log(this.state)\n    })\n  }\n\n\n  render() {\n    // if(false){\n    //   this.props.history.push('/ruta')\n    // }\n\n    return (\n      <div>\n        <h1>\n          Si te acabas de mudar o est√°s a punto de mudarte, podemos ayudarte\n        </h1>\n        {/* <NavLink to={\"/create-bid\"}>Me voy a mudar</NavLink>\n        <NavLink to={\"/create-bid\"}>Me acabo de mudar</NavLink> */}\n        <Tabs className=\"tab-demo z-depth-1 tabs-fixed-width\">\n          <Tab title=\"Me voy a mudar\"></Tab>\n          <Tab title=\"Me acabo de mudar\" active>\n            {this.props.products && this.state.bids ? (\n              <div>\n               \n                <SearchBar\n                  updateSearch={searchText => this.makeSearch(searchText)}\n                  // updateInStock={stockCheckbox => this.changeStock(stockCheckbox)}\n                />\n                <Bidmapcontainer\n                  bids={this.state.bids}\n                  centerMap={this.props.centerMap}\n                ></Bidmapcontainer>\n\n                <AllProducts products={this.props.products}></AllProducts>\n              </div>\n            ) : (\n              <div>\n                    <Preloader flashing size=\"small\" />\n              <ModalLogin></ModalLogin>\n\n              </div>\n          \n             \n            )}\n          </Tab>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Home);\n"]},"metadata":{},"sourceType":"module"}