{"ast":null,"code":"import _defineProperty from \"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/fer/ironhack/week_8/jakku/client/src/components/pages/ShowProduct.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport Productmapcontainer from \"../molecules/Productmapcontainer\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { withRouter } from 'react-router-dom';\nimport PPal from \"./components/organisms/PPal\";\nimport moment from \"moment\";\nimport 'moment/locale/es';\nmoment.locale('es');\nconst CLIENT = {\n  sandbox: process.env.REACT_APP_PAYPAL_CLIENT_ID\n};\nconst ENV = \"sandbox\";\n\nclass ShowProduct extends Component {\n  constructor(props) {\n    super(props);\n\n    this.goBack = () => {\n      this.props.history.goBack();\n    };\n\n    this.transformDate = () => {\n      moment.lang('es');\n      const dateTransformed = moment(this.props.product.bid.deadLine).format('LL');\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, dateTransformed);\n    };\n\n    this.state = {\n      product: this.props.product\n    };\n  }\n\n  componentDidMount() {\n    this.props.productFromApp().then(product => {\n      this.setState(_objectSpread({}, this.state, {\n        product: this.props.product\n      }));\n      console.log(\"showproductmount\", this.props.product);\n    });\n  }\n\n  change() {\n    this.props.productFromApp();\n    this.setState(_objectSpread({}, this.state, {\n      product: this.props.product\n    }));\n    console.log(\"%%%%\", this.state);\n  }\n\n  buy() {\n    this.props.buyFromApp(this.props.product._id);\n  }\n\n  render() {\n    const onSuccess = payment => console.log('Successful payment!', payment);\n\n    const onError = error => console.log('Erroneous payment OR failed to load script!', error);\n\n    const onCancel = data => console.log('Cancelled payment!', data);\n\n    if (this.props.product) {\n      return React.createElement(\"div\", {\n        className: \"display-product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(PPal, {\n        client: CLIENT,\n        env: ENV,\n        commit: true,\n        currency: 'EUR',\n        total: 1,\n        onSuccess: onSuccess,\n        onError: onError,\n        onCancel: onCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        className: \"back-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"medium material-icons\",\n        onClick: this.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"arrow_back\")), React.createElement(\"h1\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Contenido de la caja\"), React.createElement(\"div\", {\n        className: \"container-product-display\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.product.imgPath1,\n        alt: \"product image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, this.props.product.name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, this.props.product.description), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"La mudanza de esta caja ser\\xE1 el \", this.transformDate(), \" de \", this.props.product.bid.from, \" a \", this.props.product.bid.to), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Precio: \", this.props.product.price, \" \\u20AC\"), this.props.product.active && this.props.product.owner._id !== this.props.userId ? React.createElement(\"button\", {\n        onClick: e => this.buy(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Comprar\") : this.props.product.buyer == this.props.userId ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }) : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Esta caja es tuya\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, !this.props.product.active && this.props.userId == this.props.product.buyer ? \"Comprado! Enhorabuena\" : !this.props.product.active ? \"Vendido\" : \"\"), React.createElement(\"div\", {\n        className: \"owner-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"profile-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.product.owner.imgPath,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.props.product.owner.username)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Localizaci\\xF3n: \", this.props.product.bid.location.address), React.createElement(Productmapcontainer, {\n        products: [this.props.product],\n        zoomMap: 18,\n        centerMap: {\n          lat: this.props.product.bid.location.coordinates[1],\n          lng: this.props.product.bid.location.coordinates[0]\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(PreloaderSpinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default withRouter(ShowProduct);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/ShowProduct.jsx"],"names":["React","Component","Productmapcontainer","PreloaderSpinner","withRouter","PPal","moment","locale","CLIENT","sandbox","process","env","REACT_APP_PAYPAL_CLIENT_ID","ENV","ShowProduct","constructor","props","goBack","history","transformDate","lang","dateTransformed","product","bid","deadLine","format","state","componentDidMount","productFromApp","then","setState","console","log","change","buy","buyFromApp","_id","render","onSuccess","payment","onError","error","onCancel","data","imgPath1","name","description","from","to","price","active","owner","userId","e","buyer","imgPath","username","location","address","lat","coordinates","lng"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Productmapcontainer from \"../molecules/Productmapcontainer\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { withRouter } from 'react-router-dom'\nimport PPal from \"./components/organisms/PPal\";\nimport moment from \"moment\";\nimport 'moment/locale/es'\nmoment.locale('es')\n\nconst CLIENT = {\n  sandbox: process.env.REACT_APP_PAYPAL_CLIENT_ID\n};\nconst ENV = \"sandbox\";\n\n\nclass ShowProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      product: this.props.product,\n    };\n  }\n  componentDidMount(){\n    this.props.productFromApp()\n    .then(product => {\n      this.setState({\n        ...this.state,\n        product: this.props.product,\n        \n      })\n      console.log(\"showproductmount\", this.props.product)\n    })\n  \n  }\n  change() {\n    this.props.productFromApp()\n    this.setState ({\n      ...this.state,\n      product: this.props.product,\n    })\n    console.log(\"%%%%\", this.state)\n  }\n  buy() {\n    this.props.buyFromApp(this.props.product._id)\n  }\n  goBack =()=> {\n    this.props.history.goBack()\n  }\n  transformDate = () => {\n    \n    moment.lang('es');\n    const dateTransformed= moment(this.props.product.bid.deadLine).format('LL')\n    return <p>{dateTransformed}</p>\n  }\n\n  render() {\n    const onSuccess = (payment) =>\n    console.log('Successful payment!', payment);\n  const onError = (error) =>\n    console.log('Erroneous payment OR failed to load script!', error);\n  const onCancel = (data) =>\n    console.log('Cancelled payment!', data);\n\n    if(this.props.product) {\n      return (\n     \n        <div className=\"display-product\">\n           <PPal\n      client={CLIENT}\n      env={ENV}\n      commit={true}\n      currency={'EUR'}\n      total={1}\n      onSuccess={onSuccess}\n      onError={onError}\n      onCancel={onCancel}\n      ></PPal>\n        <a className=\"back-btn\"><i class=\"medium material-icons\" onClick={this.goBack}>arrow_back</i></a>\n        <h1 className=\"title\">Contenido de la caja</h1>\n        <div className=\"container-product-display\">\n          <img src={this.props.product.imgPath1} alt=\"product image\"></img>\n          {/* <img src={this.props.product.imgPath2} alt=\"product image\"></img>\n          <img src={this.props.product.imgPath3} alt=\"product image\"></img> */}\n          <h3>{this.props.product.name}</h3>\n          <p>{this.props.product.description}</p>\n          <p>La mudanza de esta caja será el {this.transformDate()} de {this.props.product.bid.from} a {this.props.product.bid.to}</p>\n          <p>Precio: {this.props.product.price} €</p>\n          \n          {/* {this.props.product.active && this.props.product.owner._id!=this.props.userId &&(<button onClick={e => this.buy(e)}>Comprar</button>)} */}\n          {(this.props.product.active && this.props.product.owner._id!==this.props.userId) ?\n            <button onClick={e => this.buy(e)}>Comprar</button>\n            :\n            this.props.product.buyer==this.props.userId?\n            <p></p>\n            :\n            <p>Esta caja es tuya</p>\n            }\n          <span>{!this.props.product.active && this.props.userId==this.props.product.buyer? \"Comprado! Enhorabuena\" : !this.props.product.active? \"Vendido\": \"\"}</span>\n          <div className=\"owner-container\">\n            <div className=\"profile-image\">\n          <img src={this.props.product.owner.imgPath}></img>\n            </div>\n          <p>{this.props.product.owner.username}</p>\n          </div>\n          <p>Localización: {this.props.product.bid.location.address}</p>\n          \n          <Productmapcontainer products={[this.props.product]} zoomMap={18} centerMap={{lat: this.props.product.bid.location.coordinates[1], lng: this.props.product.bid.location.coordinates[0]}} ></Productmapcontainer>\n          \n        </div>\n        </div>\n      );\n    }\n    else {\n      \n      return (\n \n        <PreloaderSpinner></PreloaderSpinner>\n        \n     \n      )\n    }\n  }\n}\nexport default withRouter(ShowProduct)"]},"metadata":{},"sourceType":"module"}